{"ast":null,"code":"import _regeneratorRuntime from\"/Users/wes/Projects/Programming/Week13/strangers-things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/wes/Projects/Programming/Week13/strangers-things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/wes/Projects/Programming/Week13/strangers-things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{createPost,getUserDetails}from'../api';// import { getMe } from '../index'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreatePost=function CreatePost(_ref){var token=_ref.token,fetchPosts=_ref.fetchPosts,navigate=_ref.navigate,setUser=_ref.setUser;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),ogTitle=_useState2[0],setNewTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),ogDescription=_useState4[0],setNewDesc=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),ogLocation=_useState6[0],setNewLocation=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),ogPrice=_useState8[0],setNewPrice=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),ogwillDeliver=_useState10[0],setNewWillDeliver=_useState10[1];function addPost(){return _addPost.apply(this,arguments);}function _addPost(){_addPost=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var newPost,getMe,_getMe;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_getMe=function _getMe3(){_getMe=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var storedToken,results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:storedToken=window.localStorage.getItem('token');if(token){_context.next=4;break;}if(storedToken){setToken(storedToken);}return _context.abrupt(\"return\");case 4:_context.next=6;return getUserDetails(token);case 6:results=_context.sent;if(results.success){setUser(results.data);}else{console.log(results.error.message);}case 8:case\"end\":return _context.stop();}}},_callee);}));return _getMe.apply(this,arguments);};getMe=function _getMe2(){return _getMe.apply(this,arguments);};newPost={title:ogTitle,description:ogDescription,price:ogPrice,location:ogLocation,willDeliver:ogwillDeliver};_context2.next=5;return createPost(token,newPost);case 5:_context2.next=7;return fetchPosts();case 7:_context2.next=9;return getMe();case 9:navigate(\"/profile\");case 10:case\"end\":return _context2.stop();}}},_callee2);}));return _addPost.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"form\",{id:\"notecard\",onSubmit:function onSubmit(ev){ev.preventDefault();addPost();},children:[/*#__PURE__*/_jsx(\"input\",{id:\"createTitle\",type:\"text\",placeholder:\"title\",onChange:function onChange(ev){return setNewTitle(ev.target.value);}}),/*#__PURE__*/_jsx(\"input\",{id:\"createDescription\",type:\"text\",placeholder:\"description\",onChange:function onChange(ev){return setNewDesc(ev.target.value);}}),/*#__PURE__*/_jsx(\"input\",{id:\"createLocation\",type:\"text\",placeholder:\"location\",onChange:function onChange(ev){return setNewLocation(ev.target.value);}}),/*#__PURE__*/_jsx(\"input\",{id:\"createPrice\",type:\"number\",placeholder:\"price\",onChange:function onChange(ev){return setNewPrice(ev.target.value);}}),/*#__PURE__*/_jsx(\"p\",{children:\"Will Deliver?\"}),/*#__PURE__*/_jsx(\"input\",{id:\"createWD\",type:\"checkbox\",checked:ogwillDeliver,onChange:function onChange(ev){return setNewWillDeliver(ev.target.checked);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Post\"})]});};export default CreatePost;","map":{"version":3,"names":["React","useState","createPost","getUserDetails","CreatePost","token","fetchPosts","navigate","setUser","ogTitle","setNewTitle","ogDescription","setNewDesc","ogLocation","setNewLocation","ogPrice","setNewPrice","ogwillDeliver","setNewWillDeliver","addPost","getMe","storedToken","window","localStorage","getItem","setToken","results","success","data","console","log","error","message","newPost","title","description","price","location","willDeliver","ev","preventDefault","target","value","checked"],"sources":["/Users/wes/Projects/Programming/Week13/strangers-things/src/components/CreatePost.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { createPost, getUserDetails } from '../api';\n// import { getMe } from '../index'\n\nconst CreatePost = ({ token, fetchPosts, navigate, setUser }) => {\n  \n  const [ogTitle, setNewTitle] = useState('');\n  const [ogDescription, setNewDesc] = useState('');\n  const [ogLocation, setNewLocation] = useState('');\n  const [ogPrice, setNewPrice] = useState('');\n  const [ogwillDeliver, setNewWillDeliver] = useState(null);\n  \n  async function addPost() {\n    const newPost = {\n      title: ogTitle,\n      description: ogDescription,\n      price: ogPrice,\n      location: ogLocation,\n      willDeliver: ogwillDeliver\n    }\n\n    async function getMe() {\n      const storedToken = window.localStorage.getItem('token');\n  \n      if (!token) {\n        if (storedToken) {\n          setToken(storedToken);\n        }\n        return;\n      }\n  \n      const results = await getUserDetails(token)\n      if (results.success) {\n        setUser(results.data);\n      } else {\n        console.log(results.error.message);\n      }\n    }\n    \n    await createPost(token, newPost)\n    await fetchPosts();\n    await getMe();\n    navigate(`/profile`)\n  }\n  \n  return (\n    <form \n      id='notecard'\n      onSubmit={ (ev) => {\n      ev.preventDefault();\n      addPost();\n      \n    }}>\n      <input \n        id='createTitle'\n        type='text'\n        placeholder='title'\n        onChange={(ev) => setNewTitle(ev.target.value)}\n      />\n      <input \n        id='createDescription'\n        type='text'\n        placeholder='description'\n        onChange={(ev) => setNewDesc(ev.target.value)}\n      />\n      <input \n        id='createLocation'\n        type='text'\n        placeholder='location'\n        onChange={(ev) => setNewLocation(ev.target.value)}\n      />\n      <input \n        id='createPrice'\n        type='number'\n        placeholder='price'\n        onChange={(ev) => setNewPrice(ev.target.value)}\n      />\n      <p>Will Deliver?</p>\n      <input \n        id='createWD'\n        type='checkbox'\n        checked={ogwillDeliver}\n        onChange={(ev) => setNewWillDeliver(ev.target.checked)}\n      />\n      <button type='submit'>Post</button>\n    </form>\n  )\n}\n\nexport default CreatePost;"],"mappings":"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"},"metadata":{},"sourceType":"module"}