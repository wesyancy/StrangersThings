{"ast":null,"code":"import _regeneratorRuntime from\"/Users/wes/Projects/Programming/Week13/strangers-things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/wes/Projects/Programming/Week13/strangers-things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/wes/Projects/Programming/Week13/strangers-things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import ReactDOM from'react-dom/client';import{Route,BrowserRouter,Routes,useNavigate}from'react-router-dom';import'./style.css';import{Navbar,Posts,Profile,Home,Register,Login,CreatePost,SinglePostView,EditPost}from'./components';import{getPosts,getUserDetails}from'./api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),token=_useState4[0],setToken=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),isLoggedIn=_useState8[0],setIsLoggedIn=_useState8[1];var navigate=useNavigate();function logout(){window.localStorage.removeItem('token');setToken('');setUser({});}function fetchPosts(){return _fetchPosts.apply(this,arguments);}function _fetchPosts(){_fetchPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getPosts(token);case 2:results=_context.sent;setPosts(results.data.posts);case 4:case\"end\":return _context.stop();}}},_callee);}));return _fetchPosts.apply(this,arguments);}function getMe(){return _getMe.apply(this,arguments);}function _getMe(){_getMe=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var storedToken,results;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:storedToken=window.localStorage.getItem('token');if(token){_context2.next=4;break;}if(storedToken){setToken(storedToken);}return _context2.abrupt(\"return\");case 4:_context2.next=6;return getUserDetails(token);case 6:results=_context2.sent;if(results.success){setUser(results.data);}else{console.log(results.error.message);}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _getMe.apply(this,arguments);}useEffect(function(){fetchPosts();},[token]);useEffect(function(){getMe();},[token]);return/*#__PURE__*/_jsxs(\"div\",{id:\"navbar\",children:[/*#__PURE__*/_jsx(Navbar,{logout:logout,token:token}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/posts\",element:/*#__PURE__*/_jsx(Posts,{posts:posts,token:token})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/posts/create-post\",element:/*#__PURE__*/_jsx(CreatePost,{token:token,fetchPosts:fetchPosts,navigate:navigate,user:user,setUser:setUser})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/posts/edit-post/:postID\",element:/*#__PURE__*/_jsx(EditPost,{posts:posts,token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/posts/:postID\",element:/*#__PURE__*/_jsx(SinglePostView,{posts:posts,token:token,user:user,navigate:navigate,setUser:setUser,getMe:getMe,isLoggedIn:isLoggedIn})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{getMe:getMe,user:user,token:token,fetchPosts:fetchPosts})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{setToken:setToken,token:token,navigate:navigate})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{setToken:setToken,navigate:navigate,isLoggedIn:isLoggedIn,setIsLoggedIn:setIsLoggedIn})})]})]});};var container=document.querySelector('#container');var root=ReactDOM.createRoot(container);root.render(/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(App,{})}));","map":{"version":3,"names":["React","useState","useEffect","ReactDOM","Route","BrowserRouter","Routes","useNavigate","Navbar","Posts","Profile","Home","Register","Login","CreatePost","SinglePostView","EditPost","getPosts","getUserDetails","App","posts","setPosts","token","setToken","user","setUser","isLoggedIn","setIsLoggedIn","navigate","logout","window","localStorage","removeItem","fetchPosts","results","data","getMe","storedToken","getItem","success","console","log","error","message","container","document","querySelector","root","createRoot","render"],"sources":["/Users/wes/Projects/Programming/Week13/strangers-things/src/index.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { Route, BrowserRouter, Routes, useNavigate } from 'react-router-dom';\nimport './style.css';\nimport {\n  Navbar,\n  Posts,\n  Profile,\n  Home,\n  Register,\n  Login,\n  CreatePost,\n  SinglePostView,\n  EditPost\n} from './components';\n\nimport {\n  getPosts,\n  getUserDetails\n} from './api';\n\nconst App = () => {\n  const [posts, setPosts] = useState([]);\n  const [token, setToken] = useState('');\n  const [user, setUser] = useState({});\n  const [isLoggedIn, setIsLoggedIn] = useState(null)\n\n  const navigate = useNavigate();\n\n  function logout() {\n    window.localStorage.removeItem('token');\n    setToken('');\n    setUser({});\n  }\n\n  async function fetchPosts() {\n    const results = await getPosts(token)\n    setPosts(results.data.posts);\n  }\n\n  async function getMe() {\n    const storedToken = window.localStorage.getItem('token');\n\n    if (!token) {\n      if (storedToken) {\n        setToken(storedToken);\n      }\n      return;\n    }\n\n    const results = await getUserDetails(token)\n    if (results.success) {\n      setUser(results.data);\n    } else {\n      console.log(results.error.message);\n    }\n  }\n\n  useEffect(() => {\n    fetchPosts();\n  }, [token])\n\n  useEffect(() => {\n    getMe();\n  }, [token])\n\n  return (\n    <div id=\"navbar\">\n      <Navbar logout={logout} token={token} />\n      <Routes >\n        <Route\n          path='/'\n          element={<Home\n            token={token} />}\n        />\n        <Route\n          path='/posts'\n          element={<Posts\n            posts={posts}\n            token={token}\n          />}\n        />\n        <Route\n          exact path='/posts/create-post'\n          element={<CreatePost\n            token={token}\n            fetchPosts={fetchPosts}\n            navigate={navigate}\n            user={user}\n            setUser={setUser}\n          />}\n        />\n        <Route\n          exact path='/posts/edit-post/:postID'\n          element={<EditPost\n            posts={posts}\n            token={token}\n          />}\n        />\n        <Route\n          path='/posts/:postID'\n          element={<SinglePostView\n            posts={posts}\n            token={token}\n            user={user}\n            navigate={navigate}\n            setUser={setUser}\n            getMe={getMe}\n            isLoggedIn={isLoggedIn}\n          />}\n        />\n        <Route\n          path='/profile'\n          element={<Profile\n            getMe={getMe}\n            user={user}\n            token={token}\n            fetchPosts={fetchPosts}\n          />}\n        />\n        <Route\n          path='/register'\n          element={<Register\n            setToken={setToken}\n            token={token}\n            navigate={navigate}\n          />}\n        />\n        <Route\n          path='/login'\n          element={<Login\n            setToken={setToken}\n            navigate={navigate}\n            isLoggedIn={isLoggedIn}\n            setIsLoggedIn={setIsLoggedIn}\n          />}\n        />\n      </Routes>\n    </div>\n  )\n}\n\nconst container = document.querySelector('#container');\nconst root = ReactDOM.createRoot(container);\nroot.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>\n);"],"mappings":"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"},"metadata":{},"sourceType":"module"}