{"ast":null,"code":"import _regeneratorRuntime from\"/Users/wes/Projects/Programming/Week13/strangers-things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/wes/Projects/Programming/Week13/strangers-things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/wes/Projects/Programming/Week13/strangers-things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import{createMessage,getUserDetails,deletePost}from'../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SendMessage=function SendMessage(_ref){var postID=_ref.postID,token=_ref.token;var _useState=useState({content:''}),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var navigate=useNavigate();// we need 3 things to make this request\n// Post-id, token, message object containing the content of the message\nfunction addMessage(){return _addMessage.apply(this,arguments);}function _addMessage(){_addMessage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return createMessage({postID:postID,message:message,token:token});case 2:navigate(\"/profile\");case 3:case\"end\":return _context.stop();}}},_callee);}));return _addMessage.apply(this,arguments);}return/*#__PURE__*/_jsx(\"form\",{onSubmit:function onSubmit(ev){ev.preventDefault();addMessage();},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{id:\"messageTB\",type:\"text\",placeholder:\"Enter Message\",onChange:function onChange(ev){return setMessage({content:ev.target.value});}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Send Message\"})]})});};var SinglePostView=function SinglePostView(_ref2){var posts=_ref2.posts,token=_ref2.token,getMe=_ref2.getMe;var navigate=useNavigate();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),activateMessage=_useState4[0],setActivateMessage=_useState4[1];var _useParams=useParams(),postID=_useParams.postID;var _posts$filter=posts.filter(function(post){return post._id===postID;}),_posts$filter2=_slicedToArray(_posts$filter,1),currentPost=_posts$filter2[0];var title=currentPost.title,description=currentPost.description,location=currentPost.location,price=currentPost.price,willDeliver=currentPost.willDeliver,isAuthor=currentPost.isAuthor;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{id:\"notecard\",children:[/*#__PURE__*/_jsx(\"h3\",{children:title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Description: \",description]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: \",price]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Location: \",location]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Will Deliver: \",willDeliver?'Yes':'No']})]}),token&&!isAuthor?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setActivateMessage(!activateMessage);},children:\"Message this user\"}):token?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/posts/edit-post/\".concat(postID),children:/*#__PURE__*/_jsx(\"button\",{children:\"Edit Post\"})}),/*#__PURE__*/_jsx(\"button\",{id:\"delete\",onClick:function onClick(){deletePost(token,postID);getMe();navigate(\"/profile\");},children:\"Delete Post\"})]}):null,activateMessage&&/*#__PURE__*/_jsx(SendMessage,{postID:postID,token:token}),/*#__PURE__*/_jsx(\"br\",{}),token?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return navigate(\"/profile\");},children:\"Profile\"}):null]});};export default SinglePostView;","map":{"version":3,"names":["React","useState","useParams","useNavigate","Link","createMessage","getUserDetails","deletePost","SendMessage","postID","token","content","message","setMessage","navigate","addMessage","ev","preventDefault","target","value","SinglePostView","posts","getMe","activateMessage","setActivateMessage","filter","post","_id","currentPost","title","description","location","price","willDeliver","isAuthor"],"sources":["/Users/wes/Projects/Programming/Week13/strangers-things/src/components/SinglePostView.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { createMessage, getUserDetails, deletePost } from '../api';\n\nconst SendMessage = ({ postID, token }) => {\n  const [message, setMessage] = useState({ content: '' });\n\n  const navigate = useNavigate();\n  // we need 3 things to make this request\n  // Post-id, token, message object containing the content of the message\n\n  async function addMessage() {\n    await createMessage({ postID, message, token }); \n    navigate(`/profile`)\n  }\n\n  return (\n    <form onSubmit={(ev) => {\n      ev.preventDefault();\n      addMessage();\n\n    }}>\n\n      <div>\n        <input\n          id='messageTB'\n          type='text'\n          placeholder='Enter Message'\n          onChange={(ev) => setMessage({ content: ev.target.value })}\n        />\n        <br></br>\n        <button type='submit'>Send Message</button>\n      </div>\n\n    </form>\n  )\n}\n\nconst SinglePostView = ({ posts, token, getMe }) => {\n\n  const navigate = useNavigate();\n\n  const [activateMessage, setActivateMessage] = useState(false);\n\n  const { postID } = useParams();\n\n  const [currentPost] = posts.filter(post => post._id === postID);\n\n  const { title, description, location, price, willDeliver, isAuthor } = currentPost;\n\n  return (\n    <div>\n      <div id='notecard'>\n        <h3>{title}</h3>\n        <p>Description: {description}</p>\n        <p>Price: {price}</p>\n        <p>Location: {location}</p>\n        <p>Will Deliver: {willDeliver ? 'Yes' : 'No'}</p>\n\n      </div>\n      {token && !isAuthor ?\n        (\n          <button onClick={() => setActivateMessage(!activateMessage)}>Message this user</button>\n        )\n        :\n        ( token ? \n          <>\n            <Link to={`/posts/edit-post/${postID}`}><button>Edit Post</button></Link>\n            <button\n              id='delete'\n              onClick={() => {\n                deletePost(token, postID);\n                getMe();\n                navigate(`/profile`);\n              }}>Delete Post</button>\n          </> : null\n        )\n      }\n      {\n        activateMessage && <SendMessage postID={postID} token={token} />\n      }\n      <br></br>\n      {token ? <button onClick={() => navigate(`/profile`)}>Profile</button> : null}\n\n    </div>\n  )\n}\n\nexport default SinglePostView;"],"mappings":"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"},"metadata":{},"sourceType":"module"}